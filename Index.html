<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Weather Dashboard</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"/>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
<div class="conatainer">
    <div class="card-header">
        <h1>Weather Dashboard</h1>
    </div>
</div>
<div class="conatainer">
    <div class="row">
        <div class = "col-sm-3 sidebar" id="sticky-sidebar">
            <h3 class="sticky-top">
                Search for a City:
            </h3>
            <form class="search-bar">
                <input type="text" id="city-search" placeholder="Search..." title="Search for a city:"></input>
                <button id="search-button"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <div class = "col-sm-9 main" id="main">
            <h2 id="selectedCity"> </h2>
                <p id="temp"></p>
                <p id="humidity"></p>
                <p id="wind-speed"></p>
                <p id="uv-index"></p>
            <h3>5-day forecast</h3>
                <div class="weather-card">Day 1</div>
                <div class="weather-card">Day 2</div>
                <div class="weather-card">Day 3</div>
                <div class="weather-card">Day 4</div>
                <div class="weather-card">Day 5</div>
        </div>
    </div>
</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">

            $("#search-button").on("click", function(event) {
                event.preventDefault();
                var userCity = $("#city-search").val();

                $.ajax({
                    url: "https://api.openweathermap.org/data/2.5/weather?q=" + userCity + "&units=metric&appid=3faf3425dc1e17e275b6e83d3fccceb1",
                    method: "GET"
                }).then(function(response) {
                    //var tBody = $("tbody");
                    
                    //var tRow = $("<tr>");

                    //var titleTd = $("<td>").text(response.Title);
                    //var yearTd = $("<td>").text(response.Year);
                    //var actorsTd = $("<td>").text(response.Actors);  

                    //tRow.append(titleTd, yearTd, actorsTd);

                    //tBody.append(tRow);
                    
                    console.log(response);
                    $('#selectedCity').append(userCity);
                    $('#temp').append("Temperature: " + (JSON.stringify(response.main.temp)));
                    $('#humidity').append("Humidity: " + (JSON.stringify(response.main.humidity)));
                    $('#wind-speed').append("Wind Speed: " + (JSON.stringify(response.wind.speed)));
                    
                    
                    
                    //console.log("Humidity: " + response.main.humidity);
                    //console.log("Wind speed: " + response.wind.speed);
                    //console.log("Temperature " + response.main.temp);

                    var lat = response.coord.lat;
                    var lon = response.coord.lon;

                    $.ajax({
                        url: "http://api.openweathermap.org/data/2.5/uvi?lat=" + lat + "&lon=" + lon + "&appid=3faf3425dc1e17e275b6e83d3fccceb1",
                        method: "GET"
                    }).then(function(response) {
                //var tBody = $("tbody");
                
                //var tRow = $("<tr>");

                //var titleTd = $("<td>").text(response.Title);
                //var yearTd = $("<td>").text(response.Year);
                //var actorsTd = $("<td>").text(response.Actors);  

                //tRow.append(titleTd, yearTd, actorsTd);

                //tBody.append(tRow);
                $('#uv-index').append("UV Index: " + (JSON.stringify(response.value)));
                //console.log(response);
                //console.log("Temperature " + response.main.temp);
                

                    });
                });        
            })
            //function addTable() {
                //$("body").append($addTable);
                
                
            //}
            
        </script>
    </body>
</html>